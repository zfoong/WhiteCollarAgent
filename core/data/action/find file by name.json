{
  "_id": { "$oid": "688c339a12c6041305c2b1b8" },
  "name": "find file by name",
  "description": "Finds files by name or pattern across the system. Supports wildcards, relative paths, and recursive search.",
  "type": "atomic",
  "execution_mode": "sandboxed",
  "mode": "CLI",
  "platforms": ["windows", "linux", "darwin"],
  "input_schema": {
    "pattern": {
      "type": "string",
      "example": "*.pdf",
      "description": "The file name or glob pattern to match. Supports wildcards like * and ?"
    },
    "recursive": {
      "type": "boolean",
      "example": true,
      "description": "Whether to search directories recursively. Default is true."
    }
  },
  "output_schema": {
    "status": {
      "type": "string",
      "example": "success"
    },
    "matches": {
      "type": "array",
      "items": { "type": "string" },
      "example": ["~/Documents/file1.pdf", "~/Documents/reports/file2.pdf"]
    },
    "message": {
      "type": "string",
      "example": "No files matched."
    }
  },
  "code": "import json, os, fnmatch\n\npattern = input_data.get('pattern', '').strip()\nrecursive = bool(input_data.get('recursive', True))\n\nif not pattern:\n    output = json.dumps({'status': 'error', 'matches': [], 'message': 'Pattern is required.'})\n    exit()\n\npattern = os.path.expanduser(pattern)\npattern = os.path.normpath(pattern)\n\n# Determine base directory and file pattern\nif os.path.isabs(pattern) or os.sep in pattern:\n    base_dir = os.path.dirname(pattern) or os.path.expanduser('~')\n    file_pattern = os.path.basename(pattern)\nelse:\n    base_dir = os.path.expanduser('~')\n    file_pattern = pattern\n\nmatches = []\nfor root, dirs, files in os.walk(base_dir):\n    try:\n        for name in files:\n            if fnmatch.fnmatch(name, file_pattern):\n                matches.append(os.path.abspath(os.path.join(root, name)))\n    except PermissionError:\n        continue\n    if not recursive:\n        break\n\noutput = json.dumps({\n    'status': 'success',\n    'matches': matches,\n    'message': '' if matches else f\"No files matching '{file_pattern}' were found.\"\n})",
  "platform_overrides": {
    "windows": {
      "code": "import json, os, fnmatch\n\npattern = input_data.get('pattern', '').strip()\nrecursive = bool(input_data.get('recursive', True))\n\nif not pattern:\n    output = json.dumps({'status': 'error', 'matches': [], 'message': 'Pattern is required.'})\n    exit()\n\npattern = pattern.replace('/', '\\\\')\npattern = os.path.expanduser(pattern)\npattern = os.path.normpath(pattern)\n\nif os.path.isabs(pattern) or '\\\\' in pattern:\n    base_dir = os.path.dirname(pattern) or os.path.expanduser('~')\n    file_pattern = os.path.basename(pattern)\nelse:\n    base_dir = os.path.expanduser('~')\n    file_pattern = pattern\n\nmatches = []\nfor root, dirs, files in os.walk(base_dir):\n    try:\n        for name in files:\n            if fnmatch.fnmatch(name, file_pattern):\n                matches.append(os.path.abspath(os.path.join(root, name)))\n    except PermissionError:\n        continue\n    if not recursive:\n        break\n\noutput = json.dumps({\n    'status': 'success',\n    'matches': matches,\n    'message': '' if matches else f\"No files matching '{file_pattern}' were found.\"\n})"
    }
  },
  "scope": ["global"]
}
