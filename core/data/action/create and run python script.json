{
  "_id": {
    "$oid": "6841165e0dceb231ab654928"
  },
  "name": "create and run python script",
  "description": "This action takes a single Python code snippet as input and executes it in a fresh environment with no pre-installed third-party librariesâ€”only base Python is available. The provided code must include any necessary installation steps (e.g., subprocess calls to pip) to ensure required packages are present. This action is intended for cases when the AI agent needs to create a one-off solution dynamically. The action captures stdout and stderr, and returns them along with the final status.",
  "type": "atomic",
  "execution_mode": "sandboxed",
  "mode": "ALL",
  "code": "import json\nimport sys\nimport subprocess\nimport io\nimport traceback\n\ndef _execute_action() -> None:\n    input_data = globals().get(\"input_data\", {})\n    code_snippet = input_data.get(\"code\", \"\")\n\n    if not code_snippet.strip():\n        output = json.dumps({\n            \"status\": \"error\",\n            \"stdout\": \"\",\n            \"stderr\": \"\",\n            \"message\": \"The 'code' field is required.\"\n        }, ensure_ascii=False)\n        return\n\n    stdout_capture = io.StringIO()\n    stderr_capture = io.StringIO()\n\n    try:\n        original_stdout = sys.stdout\n        original_stderr = sys.stderr\n        sys.stdout = stdout_capture\n        sys.stderr = stderr_capture\n\n        exec_globals = {}\n        exec(code_snippet, exec_globals)\n\n        sys.stdout = original_stdout\n        sys.stderr = original_stderr\n\n        output = json.dumps({\n            \"status\": \"success\",\n            \"stdout\": stdout_capture.getvalue().strip(),\n            \"stderr\": stderr_capture.getvalue().strip()\n        }, ensure_ascii=False)\n\n    except Exception:\n        sys.stdout = original_stdout\n        sys.stderr = original_stderr\n\n        output = json.dumps({\n            \"status\": \"error\",\n            \"stdout\": stdout_capture.getvalue().strip(),\n            \"stderr\": stderr_capture.getvalue().strip(),\n            \"message\": traceback.format_exc()\n        }, ensure_ascii=False)\n\n_execute_action()\n",
  "input_schema": {
    "code": {
      "type": "string",
      "example": "import subprocess\nsubprocess.check_call(['pip', 'install', 'requests'])\nimport requests\nprint(requests.get('https://example.com').text)",
      "description": "The Python code snippet to execute. It must be self-contained and handle all package installations needed at runtime. The input code MUST NOT have any malicious code, the code MUST BE SANDBOXED. The code must be production code with the highest level of quality. DO NOT give any placeholder code or fabricated data. You MUST NOT handle exception with system exit."
    }
  },
  "output_schema": {
    "status": {
      "type": "string",
      "example": "success",
      "description": "'success' if the script ran without errors; otherwise 'error'."
    },
    "stdout": {
      "type": "string",
      "example": "Hello, World!",
      "description": "Captured standard output from the script execution."
    },
    "stderr": {
      "type": "string",
      "example": "Traceback (most recent call last): ...",
      "description": "Captured standard error from the script execution (empty if no error)."
    },
    "message": {
      "type": "string",
      "example": "Script executed successfully.",
      "description": "A short message indicating the result of the script execution. Only present if status is 'error'."
    }
  },
  "subActions": [],
  "default": true,
  "scope": [
    "global"
  ]
}
