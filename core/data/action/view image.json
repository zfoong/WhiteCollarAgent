{
  "_id": {
    "$oid": "688c4e5b12c6041305c2b1be"
  },
  "name": "view image",
  "description": "Uses a Visual Language Model to analyse an image and return a detailed, markdown-ready description.",
  "type": "atomic",
  "execution_mode": "internal",
  "mode": "CLI",
  "input_schema": {
    "image_path": {
      "type": "string",
      "example": "C:\\\\Users\\\\user\\\\Pictures\\\\sample.jpg",
      "description": "Absolute path to the image file."
    },
    "prompt": {
      "type": "string",
      "example": "Highlight objects, colours and spatial relationships.",
      "description": "Optional user prompt refining what the VLM should describe."
    }
  },
  "output_schema": {
    "status": {
      "type": "string",
      "example": "success",
      "description": "'success' if the description was generated, 'error' otherwise."
    },
    "description": {
      "type": "string",
      "example": "A photo of a golden retriever sitting on a red sofa...",
      "description": "Markdown-friendly textual description returned by the VLM."
    },
    "message": {
      "type": "string",
      "example": "File not found.",
      "description": "Error message if applicable."
    }
  },
  "subActions": [],
  "default": false,
  "scope": [
    "global"
  ],
  "code": "import json, os\nimport core.internal_action_interface as iai\n\nimage_path = str(input_data.get('image_path', '')).strip()\nprompt = str(input_data.get('prompt', '')).strip() or None\n\nif not image_path:\n    output = json.dumps({'status': 'error', 'description': '', 'message': 'image_path is required.'})\n    exit()\n\nif not os.path.isfile(image_path):\n    output = json.dumps({'status': 'error', 'description': '', 'message': 'File not found.'})\n    exit()\n\ntry:\n    description = iai.InternalActionInterface.describe_image(image_path, prompt)\n    output = json.dumps({'status': 'success', 'description': description, 'message': ''})\nexcept Exception as e:\n    output = json.dumps({'status': 'error', 'description': '', 'message': str(e)})"
}
