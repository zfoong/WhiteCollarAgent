{
  "_id": {
    "$oid": "6840470d0dceb231ab654924"
  },
  "name": "create pdf file",
  "description": "This action creates a PDF file at the specified path using the provided Markdown content. It converts the Markdown to HTML and then to a PDF using fpdf2, preserving headings, paragraphs, lists, bold and italic formatting. It handles errors such as invalid file paths or permission issues, returning a structured JSON output.",
  "type": "atomic",
  "execution_mode": "sandboxed",
  "mode": "CLI",
  "code": "import json,sys,subprocess,importlib,os\ndef _ensure(pkg):\n    try:\n        importlib.import_module(pkg)\n    except ImportError:\n        subprocess.check_call([sys.executable,\"-m\",\"pip\",\"install\",pkg,\"--quiet\"])\n[_ensure(p) for p in (\"markdown2\",\"fpdf2\")]\nimport markdown2\nfrom fpdf import FPDF,HTMLMixin\nclass PDF(FPDF,HTMLMixin):\n    pass\n\ndef _execute_action():\n    input_data=globals().get(\"input_data\",{})\n    file_path=str(input_data.get(\"file_path\",\"\")).strip()\n    content=str(input_data.get(\"content\",\"\")).strip()\n    if not file_path:\n        output=json.dumps({\"status\":\"error\",\"path\":\"\",\"message\":\"The 'file_path' field is required.\"},ensure_ascii=False);return\n    if not content:\n        output=json.dumps({\"status\":\"error\",\"path\":\"\",\"message\":\"The 'content' field is required.\"},ensure_ascii=False);return\n    try:\n        html_content=markdown2.markdown(content)\n        pdf=PDF()\n        pdf.set_auto_page_break(auto=True,margin=15)\n        pdf.add_page()\n        pdf.write_html(html_content)\n        pdf.output(file_path)\n        output=json.dumps({\"status\":\"success\",\"path\":file_path},ensure_ascii=False)\n    except Exception as e:\n        output=json.dumps({\"status\":\"error\",\"path\":\"\",\"message\":str(e)},ensure_ascii=False)\n\n_execute_action()\n",
  "input_schema": {
    "file_path": {
      "type": "string",
      "example": "/home/user/documents/my_file.pdf",
      "description": "The full path where the new PDF file will be created. Ensure the directory exists and is writable."
    },
    "content": {
      "type": "string",
      "example": "# My Title\n\nThis is a paragraph with **bold** text and a bullet list:\n- Item 1\n- Item 2",
      "description": "The Markdown-formatted content to be converted into a PDF file. Supports headings (#, ##, etc.), paragraphs, bullet lists (-, *), numbered lists (1., 2.), bold (**text**), and italics (*text*)."
    }
  },
  "output_schema": {
    "status": {
      "type": "string",
      "example": "success",
      "description": "'success' if the file was created, 'error' otherwise."
    },
    "path": {
      "type": "string",
      "example": "/home/user/documents/my_file.pdf",
      "description": "The path to the newly created PDF file."
    },
    "message": {
      "type": "string",
      "example": "Permission denied.",
      "description": "Error message, present only if status is 'error'."
    }
  },
  "subActions": [],
  "default": false,
  "scope": [
    "global"
  ]
}
